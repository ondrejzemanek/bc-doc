<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>Blynk integration</title>

    <link href="/stylesheets/main.css" rel="stylesheet" />
  </head>

  <body>
    <header>
  <a href="https://www.bigclown.com/">
    <img src="/images/bigclown-logo.svg" alt="BigClown - Open-Source Electronics" class="header-logo" />
  </a>
</header>


    <input type="checkbox" id="navbar-toggle" role="button" />
<label for="navbar-toggle">
  <span class="icon-burger"></span>
</label>

<nav class="navbar">
  <ul>
  <li class="level0">
    <a href="/">Main page</a>
  </li>
  <li class="level1">
    <a href="/academy/">Academy</a>
      <ul>
  <li class="level2">
    <a href="/academy/clown-talk.html">Clown.Talk and Clown.Model</a>
  </li>
  <li class="level2">
    <a href="/academy/i2c.html">I<sup>2</sup>C Communication Interface</a>
  </li>
  <li class="level2">
    <a href="/academy/mqtt.html">MQTT Messaging</a>
  </li>
  <li class="level2">
    <a href="/academy/websocket.html">WebSocket Protocol</a>
  </li>
</ul>

  </li>
  <li class="level1">
    <a href="/alpha/">ALPHA SET</a>
      <ul>
  <li class="level2">
    <a href="/alpha/macos.html">Software setup for macOS</a>
  </li>
  <li class="level2">
    <a href="/alpha/raspberry-pi.html">Software setup for Raspberry Pi</a>
  </li>
  <li class="level2">
    <a href="/alpha/ubuntu.html">Software setup for Ubuntu</a>
  </li>
  <li class="level2">
    <a href="/alpha/windows.html">Software setup for Windows</a>
  </li>
</ul>

  </li>
  <li class="level1">
    <a href="/tutorial/">Tutorials</a>
      <ul>
  <li class="level2">
    <a href="/tutorial/blynk.html" class="current">Blynk integration</a>
  </li>
  <li class="level2">
    <a href="/tutorial/mqtt.html">MQTT – Message transfer protocol</a>
  </li>
  <li class="level2">
    <a href="/tutorial/node-red.html">Node RED - Visual Tool for IoT</a>
  </li>
</ul>

  </li>
</ul>

</nav>


    <div id="main-wrapper">
      <div class="toolbar">
  <ul class="toolbar-actions">
    <li>
      <a href="https://github.com/bigclownlabs/bc-doc/edit/master/source/tutorial/blynk.adoc" rel="external" title="Edit on GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon"><use xlink:href="#icon-pencil" /></svg><span class="icon-label">Improve this page</span>
      </a>
    </li>
  </ul>
</div>


      <article class="main-content tutorial tutorial_blynk">
        <h1>
          Blynk integration
        </h1>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial will show you how to connect to BigClown.Hub remotely from your smartphone.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Blynk on your smartphone / tablet.
Just use Google Play or AppStore.</p>
</li>
<li>
<p>Run Blynk and select <b class="button">Create new project</b>.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-create-project-1.png" alt="Blynk Home screen"></span></p>
</div>
</li>
<li>
<p>Give it a name (e.g. “bigclown demo”) and select <b class="button">Generic Board</b> as a hardware.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-create-project-2.png" alt="Screen Create New Project"></span></p>
</div>
</li>
<li>
<p>Write down your Auth Token (or let the application to send it to you by the E-mail).</p>
</li>
<li>
<p>Go to your Hub.
Stop it by <code>docker stop hub</code> and remove running image by <code>docker rm hub</code>.</p>
</li>
<li>
<p>Re-run Docker with environmental variable <code>BLYNK_TOKEN</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">docker run -d -p 8080:8080 -p 1883:1883 --privileged -v /dev:/dev \
  -v $HOME/hub:/var/hub -h hub-container --env BLYNK_TOKEN=da9d7ee58efabcdef123456789 \
  --name hub bigclownlabs/hub</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are running on the Raspberry Pi, then you should use <code>--name hub bigclownlabs/rpi-hub</code></p>
</div>
<div class="paragraph">
<p>Notice the part <code>--env BLYNK_TOKEN=da9d7ee58efabcdef123456789</code> – you have to fill in your Blynk token you have obtained in step 3.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Do not put this part <strong>after</strong> the name! It will not work!
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create an Menu elemet for LED.
Set output as virtual pin V1 (see below for pin assignment).</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-menu-led-1.png" alt="Screen Menu Settings with LED element"></span></p>
</div>
</li>
<li>
<p>Create selections “on”, “off”, “1 dot”, “2 dot”, and “3 dot” as menu items.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-menu-led-2.png" alt="Screen Menu Settings with menu items for the LED element"></span></p>
</div>
</li>
<li>
<p>Create relay button on pin V19.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-button-relay.png" alt="Screen Button Settings with relay"></span></p>
</div>
</li>
<li>
<p>Create widgets for your sensors, i.e. humidity, temperature, lux-meter and barometer.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-value-humidity.png" alt="Screen Value Display Settings with humidity sensor"></span>
<span class="image"><img src="images/blynk-value-temperature.png" alt="Screen Value Display Settings with temperature sensor"></span>
<span class="image"><img src="images/blynk-value-lux-meter.png" alt="Screen Value Display Settings with lux meter"></span>
<span class="image"><img src="images/blynk-value-barometer.png" alt="Screen Value Display Settings with barometer sensor"></span></p>
</div>
</li>
<li>
<p>Now you have a working Blynk dashboard.</p>
<div class="paragraph">
<p><span class="image"><img src="images/blynk-dashboard.png" alt="Screen with our dashboard"></span></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you will contend with busy state of the virtual pin, then you should simply logout and login to the Blync app again.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pin_assignment_for_blynk"><a class="anchor" href="#_pin_assignment_for_blynk"></a>Pin assignment for Blynk</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 30.7692%;">
<col style="width: 30.7692%;">
<col style="width: 23.077%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Virtual PIN</th>
<th class="tableblock halign-left valign-top">Part of topic</th>
<th class="tableblock halign-left valign-top">Payload key</th>
<th class="tableblock halign-left valign-top">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">led/-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">on, off, 1-dot, 2-dot, 3-dot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">thermometer/i2c0-48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">temperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">°C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">thermometer/i2c1-48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">temperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">°C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">thermometer/i2c0-49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">temperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">°C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">thermometer/i2c1-49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">temperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">°C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux-meter/i2c0-44</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">illuminance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux-meter/i2c1-44</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">illuminance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux-meter/i2c0-45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">illuminance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux-meter/i2c1-45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">illuminance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">barometer/i2c0-60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pressure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kPa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">barometer/i2c0-60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">altitude</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">barometer/i2c1-60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pressure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kPa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">barometer/i2c1-60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">altitude</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">humidity-sensor/i2c0-5f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">relative-humidity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">humidity-sensor/i2c1-5f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">relative-humidity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">co2-sensor/i2c0-38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">concentration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">relay/i2c0-3b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true, false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">relay/i2c0-3f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true, false</p></td>
</tr>
</tbody>
</table>
</div>
</div>
      </article>

      <footer>
  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
</footer>

    </div>

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.1"
     style="position: absolute; width: 0; height: 0; overflow: hidden;">
  <defs>
    <symbol id="icon-pencil" viewBox="0 0 28 32">
      <title>pencil</title>
      <path d="M22 2l-4 4 6 6 4-4-6-6zM0 24l0.021 6.018 5.979-0.018 16-16-6-6-16 16zM6 28h-4v-4h2v2h2v2z"/>
    </symbol>
  </defs>
</svg>

  </body>
</html>
